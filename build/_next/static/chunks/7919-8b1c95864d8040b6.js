"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7919],{47919:function(e,t,s){s.d(t,{r:function(){return ep}});var i=s(97458),n=s(11098),a=s(74631),l=s(3494),r=s(28354),c=s(84699),o=s(64719),d=s(88944),u=s(38621),p=s(43264),x=s(72596),h=s(52983),m=s(20496),b=s(38966);let f={to:x.Rl,value:(0,o.L)("0.001")};function j(){let{status:e,chain:t}=(0,d.m)();return Number(null==t?void 0:t.id)!==m.R.id&&"connected"===e?(0,i.jsx)(S,{}):(0,i.jsx)(n.x,{fontSize:"md",color:"yellow",children:"Feature not available on Ethereum Mainnet"})}function S(){let e=(0,b.p)(),{refetch:t,isFetching:s}=(0,u.N)({...f,query:{enabled:!1}}),[n,o]=(0,h.useState)(!1),{sendTransaction:d}=(0,p.p)({mutation:{onSuccess:t=>{o(!1),e({title:"Transaction Success",description:t,type:"success"})},onError:t=>{o(!1),e({title:"Error",description:(null==t?void 0:t.message)||"Failed to sign transaction",type:"error"})}}}),x=(0,h.useCallback)(async()=>{let{data:s,error:i}=await t();i?e({title:"Error",description:(null==i?void 0:i.message)||"Failed to sign transaction",type:"error"}):(o(!0),d({...f,gas:s}))},[d,t]);return(0,i.jsxs)(a.K,{direction:["column","column","row"],children:[(0,i.jsx)(l.z,{"data-testid":"sign-transaction-button",onClick:x,disabled:!d,isDisabled:n,isLoading:s,children:"Send Transaction to Vitalik"}),(0,i.jsx)(r.L,{}),(0,i.jsx)(c.r,{isExternal:!0,href:"https://sepoliafaucet.com",children:(0,i.jsx)(l.z,{variant:"outline",colorScheme:"blue",isDisabled:n,children:"Sepolia Faucet 1"})}),(0,i.jsx)(c.r,{isExternal:!0,href:"https://www.infura.io/faucet/sepolia",children:(0,i.jsx)(l.z,{variant:"outline",colorScheme:"orange",isDisabled:n,children:"Sepolia Faucet 2"})})]})}var y=s(11337),C=s(62352),g=s(36346);function v(){let e=(0,b.p)(),{signMessageAsync:t,isPending:s}=(0,y.Q)(),{isConnected:n}=(0,g.Tj)(),[a,r]=h.useState();async function c(){try{let s=await t({message:"Hello AppKit!"});r(s),e({title:C.bq.SigningSucceededToastTitle,description:s,type:"success"})}catch(t){e({title:C.bq.SigningFailedToastTitle,description:"Failed to sign message",type:"error"})}}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.z,{"data-testid":"sign-message-button",onClick:c,isDisabled:!n||s,isLoading:s,children:"Sign Message"}),(0,i.jsx)("div",{"data-testid":"w3m-signature",hidden:!0,children:a})]})}var w=s(23323);let T={Person:[{name:"name",type:"string"},{name:"wallet",type:"address"}],Mail:[{name:"from",type:"Person"},{name:"to",type:"Person"},{name:"contents",type:"string"}]},E={from:{name:"Cow",wallet:"0xCD2a3d9F938E13CD947Ec05AbC7FE734Df8DD826"},to:{name:"Bob",wallet:"0xbBbBBBBbbBBBbbbBbbBbbbbBBbBbbbbBbBbbBBbB"},contents:"Hello, Bob!"};function z(){let e=(0,b.p)(),{isConnected:t}=(0,g.Tj)(),{chain:s}=(0,d.m)(),n={name:"Ether Mail",version:"1",chainId:null==s?void 0:s.id,verifyingContract:"0xCcCCccccCCCCcCCCCCCcCcCccCcCCCcCcccccccC"},{signTypedDataAsync:a,isPending:r}=(0,w.y)();async function c(){try{let t=await a({domain:n,message:E,primaryType:"Mail",types:T});e({title:"Success",description:t,type:"success"})}catch(t){e({title:"Error",description:"Failed to sign message",type:"error"})}}return(0,i.jsx)(l.z,{"data-testid":"sign-typed-data-button",onClick:c,isDisabled:!t||r,isLoading:r,children:"Sign Typed Data"})}var D=s(89192),L=s(52876),F=s(25341),B=s(72365),k=s(44584),A=s(5451),P=s(18394),_=s(3766),R=s(13637),M=s(54304),N=s(79304),W=s(20216),I=s(16156),X=s(50554);let q=[W.F.id,I.v.id];function K(){let{address:e}=(0,g.Tj)(),{status:t,chain:s}=(0,d.m)();return q.includes(Number(null==s?void 0:s.id))&&"connected"===t?(0,i.jsx)(O,{accountAddress:e}):(0,i.jsx)(n.x,{fontSize:"md",color:"yellow",children:"Switch to Sepolia or OP to test this feature"})}function O(e){let{accountAddress:t}=e,s=(0,b.p)(),{data:o,refetch:d,isLoading:u,isRefetching:p}=(0,R.u)({abi:X.M,address:X.L,functionName:"getBalance",args:[t],query:{refetchOnWindowFocus:!1}}),{refetch:x,data:m,isFetching:f}=(0,M.G)({abi:X.M,address:X.L,functionName:"purchase",value:(0,_.f)("0.0001"),args:[1],query:{enabled:!1}}),{writeContract:j,reset:S,data:y,error:C,isPending:g}=(0,N.S)(),v=(0,h.useCallback)(async()=>{let{data:e,error:t}=await x();!t&&(null==e?void 0:e.request)?(j(e.request),await d()):s({title:"Error",description:"Not able to execute this transaction. Check your balance.",type:"error"})},[j,x]);return(0,h.useEffect)(()=>{y?s({title:"Donut Purchase Success!",description:y,type:"success"}):C&&s({title:"Error",description:"Failed to purchase donut",type:"error"}),S()},[y,C]),(0,i.jsxs)(a.K,{direction:["column","column","row"],children:[(0,i.jsx)(l.z,{"data-testid":"sign-transaction-button",onClick:v,disabled:!(null==m?void 0:m.request),isDisabled:g,isLoading:f,children:"Purchase crypto donut"}),u||p?(0,i.jsx)(n.x,{children:"Fetching donuts..."}):(0,i.jsxs)(P.k,{alignItems:"center",children:[(0,i.jsx)(n.x,{marginRight:"5px",children:"Crypto donuts left:"}),(0,i.jsx)(n.x,{children:null==o?void 0:o.toString()})]}),(0,i.jsx)(r.L,{}),(0,i.jsx)(c.r,{isExternal:!0,href:"https://sepoliafaucet.com",children:(0,i.jsx)(l.z,{variant:"outline",colorScheme:"blue",isDisabled:g,children:"Sepolia Faucet 1"})}),(0,i.jsx)(c.r,{isExternal:!0,href:"https://www.infura.io/faucet/sepolia",children:(0,i.jsx)(l.z,{variant:"outline",colorScheme:"orange",isDisabled:g,children:"Sepolia Faucet 2"})})]})}var U=s(90335);let G=[{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"}],H=[W.F.id,I.v.id];function V(){let{status:e,chain:t}=(0,d.m)();return H.includes(Number(null==t?void 0:t.id))&&"connected"===e?(0,i.jsx)(Q,{}):(0,i.jsx)(n.x,{fontSize:"md",color:"yellow",children:"Switch to Sepolia or OP to test this feature"})}function Q(){let[e,t]=(0,h.useState)(""),[s,n]=(0,h.useState)(""),o=(0,b.p)(),{writeContract:d,isPending:u}=(0,N.S)({mutation:{onSuccess:e=>{o({title:"Transaction Success",description:e,type:"success"})},onError:()=>{o({title:"Error",description:"Failed to send transaction",type:"error"})}}}),p=(0,h.useCallback)(()=>{d({abi:G,functionName:"transfer",args:[e,s],address:"0x1c7d4b196cb0c7b01d743fbc6116a902379c7238"})},[d,e,s]);return(0,i.jsxs)(a.K,{direction:["column","column","row"],children:[(0,i.jsx)(r.L,{}),(0,i.jsx)(U.I,{placeholder:"0xf34ffa...",onChange:e=>t(e.target.value),value:e}),(0,i.jsx)(U.I,{placeholder:"Units (1000000000 for 1 USDC)",onChange:e=>n(e.target.value),value:s,type:"number"}),(0,i.jsx)(l.z,{"data-testid":"sign-transaction-button",onClick:p,disabled:!d,isDisabled:u,isLoading:u,width:"80%",children:"Send USDC"}),(0,i.jsx)(c.r,{isExternal:!0,href:"https://faucet.circle.com",children:(0,i.jsx)(l.z,{variant:"outline",colorScheme:"blue",isDisabled:u,children:"USDC Faucet"})})]})}var J=s(46563),Y=s(86228),Z=s(11962);let $={to:x.Rl,value:(0,o.L)("0.0001")},ee={to:x.Rl,data:"0xdeadbeef"};function et(){let{provider:e,supported:t,supportedChains:s,supportedChainsName:a,currentChainsInfo:l}=(0,Z.C)({capability:Y.ec.ATOMIC_BATCH,method:Y.mE.WALLET_SEND_CALLS}),{address:r}=(0,g.Tj)(),{status:c}=(0,d.m)();return"connected"===c&&e&&r?t?0===s.length?(0,i.jsx)(n.x,{fontSize:"md",color:"yellow",children:"Account does not support the atomic batch feature"}):l?(0,i.jsx)(es,{}):(0,i.jsxs)(n.x,{fontSize:"md",color:"yellow",children:["Switch to ",a," to test this feature"]}):(0,i.jsx)(n.x,{fontSize:"md",color:"yellow",children:'Wallet does not support the "wallet_sendCalls" RPC method'}):(0,i.jsx)(n.x,{fontSize:"md",color:"yellow",children:"Wallet not connected"})}function es(){let e=(0,b.p)(),[t,s]=(0,h.useState)(null),{sendCalls:r,isPending:c}=(0,J.a)({mutation:{onSuccess:t=>{s(t),e({title:"SendCalls Success",description:t,type:"success"})},onError:()=>{e({title:"SendCalls Error",description:"Failed to send calls",type:"error"})}}}),o=(0,h.useCallback)(()=>{r({calls:[$,ee]})},[r]);return(0,i.jsxs)(a.K,{direction:["column","column","row"],children:[(0,i.jsx)(l.z,{"data-testid":"send-calls-button",onClick:o,disabled:!r,isDisabled:c,isLoading:c,children:"Send Batch Calls to Vitalik"}),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(F.X,{size:"xs",children:"Last batch call ID:"}),(0,i.jsx)(n.x,{"data-testid":"send-calls-id",children:t})]})]})}var ei=s(90398),en=s(59697);function ea(){let{supported:e}=(0,Z.C)({method:Y.mE.WALLET_GET_CALLS_STATUS}),{address:t}=(0,g.Tj)(),{status:s}=(0,d.m)();return"connected"===s&&t?e?(0,i.jsx)(el,{}):(0,i.jsx)(n.x,{fontSize:"md",color:"yellow",children:'Wallet does not support the "wallet_getCallsStatus" RPC method'}):(0,i.jsx)(n.x,{fontSize:"md",color:"yellow",children:"Wallet not connected"})}function el(){let[e,t]=(0,h.useState)(""),s=(0,b.p)(),{isLoading:n,refetch:r}=(0,en.Q)({id:e,query:{enabled:!1}}),c=(0,h.useCallback)(async()=>{let{error:e,data:t}=await r();t&&s({title:"GetCallsStatus Success",description:JSON.stringify(t,ei.d),type:"success"}),e&&s({title:"GetCallsStatus Error",description:"Failed to get calls status",type:"error"})},[r]);return(0,i.jsxs)(a.K,{direction:["column","column","row"],children:[(0,i.jsx)(U.I,{placeholder:"0xf34ffa...",onChange:e=>t(e.target.value),value:e,isDisabled:n,"data-testid":"get-calls-id-input"}),(0,i.jsx)(l.z,{"data-testid":"get-calls-status-button",onClick:c,isDisabled:n||!e,isLoading:n,children:"Get Calls Status"})]})}var er=s(17245);let ec={to:x.Rl,value:(0,o.L)("0.001")},eo={to:x.Rl,data:"0xdeadbeef"};function ed(){let{provider:e,supportedChains:t,supportedChainsName:s,currentChainsInfo:a,supported:l}=(0,Z.C)({capability:Y.ec.PAYMASTER_SERVICE,method:Y.mE.WALLET_SEND_CALLS}),{address:r}=(0,g.Tj)(),{status:c}=(0,d.m)();return"connected"===c&&e&&r?l?0===t.length?(0,i.jsx)(n.x,{fontSize:"md",color:"yellow",children:"Account does not support paymaster service feature"}):a?(0,i.jsx)(eu,{}):(0,i.jsxs)(n.x,{fontSize:"md",color:"yellow",children:["Switch to ",s," to test this feature"]}):(0,i.jsx)(n.x,{fontSize:"md",color:"yellow",children:'Wallet does not support "wallet_sendCalls" RPC method'}):(0,i.jsx)(n.x,{fontSize:"md",color:"yellow",children:"Wallet not connected"})}function eu(){let[e,t]=(0,h.useState)(""),[s,n]=(0,h.useState)(!1),r=(0,b.p)(),{sendCalls:c}=(0,J.a)({mutation:{onSuccess:e=>{n(!1),r({title:"SendCalls Success",description:e,type:"success"})},onError:()=>{n(!1),r({title:"SendCalls Error",description:"Failed to send calls",type:"error"})}}}),o=(0,h.useCallback)(()=>{if(n(!0),!e)throw Error("paymasterServiceUrl not set");c({calls:[ec,eo],capabilities:{paymasterService:{url:e}}})},[c,e]);return(0,i.jsxs)(a.K,{direction:["column","column","column"],children:[(0,i.jsx)(er.u,{label:"Paymaster Service URL should be of ERC-7677 paymaster service proxy",children:(0,i.jsx)(U.I,{placeholder:"http://api.pimlico.io/v2/sepolia/rpc?apikey=...",onChange:e=>t(e.target.value),value:e,isDisabled:s,whiteSpace:"nowrap",textOverflow:"ellipsis"})}),(0,i.jsx)(l.z,{width:"fit-content","data-testid":"send-calls-paymaster-service-button",onClick:o,disabled:!c,isDisabled:s||!e,children:"SendCalls w/ Paymaster Service"})]})}function ep(){return(0,i.jsxs)(D.Z,{marginTop:10,marginBottom:10,children:[(0,i.jsx)(L.O,{children:(0,i.jsx)(F.X,{size:"md",children:"Test Interactions"})}),(0,i.jsx)(B.e,{children:(0,i.jsxs)(a.K,{divider:(0,i.jsx)(k.c,{}),spacing:"4",children:[(0,i.jsxs)(A.xu,{children:[(0,i.jsx)(F.X,{size:"xs",textTransform:"uppercase",pb:"2",children:"Sign Message"}),(0,i.jsx)(v,{})]}),(0,i.jsxs)(A.xu,{children:[(0,i.jsx)(F.X,{size:"xs",textTransform:"uppercase",pb:"2",children:"Sign Typed Data"}),(0,i.jsx)(z,{})]}),(0,i.jsxs)(A.xu,{children:[(0,i.jsx)(F.X,{size:"xs",textTransform:"uppercase",pb:"2",children:"Sign Transaction"}),(0,i.jsx)(j,{})]}),(0,i.jsxs)(A.xu,{children:[(0,i.jsx)(F.X,{size:"xs",textTransform:"uppercase",pb:"2",children:"Contract Write"}),(0,i.jsx)(K,{})]}),(0,i.jsxs)(A.xu,{children:[(0,i.jsx)(F.X,{size:"xs",textTransform:"uppercase",pb:"2",children:"USDC Send"}),(0,i.jsx)(V,{})]}),(0,i.jsxs)(A.xu,{children:[(0,i.jsx)(F.X,{size:"xs",textTransform:"uppercase",pb:"2",children:"Send Calls (Atomic Batch)"}),(0,i.jsx)(et,{})]}),(0,i.jsxs)(A.xu,{children:[(0,i.jsx)(F.X,{size:"xs",textTransform:"uppercase",pb:"2",children:"Get Calls Status"}),(0,i.jsx)(ea,{})]}),(0,i.jsxs)(A.xu,{children:[(0,i.jsx)(F.X,{size:"xs",textTransform:"uppercase",pb:"2",children:"Send Calls (Paymaster Service)"}),(0,i.jsx)(ed,{})]})]})})]})}}}]);